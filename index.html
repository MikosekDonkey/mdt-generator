<!DOCTYPE html>

<html lang="cs">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MDT - Generátor</title>

    <link rel="icon" href="images/favicon-32x32.png">

    <style>
        :root {

            --police-blue: #1a237e;

            --dark-bg: #121212;

            --card-bg: #1e1e1e;

            --text-color: #e0e0e0;

            --accent: #2979ff;

            --crime: #ff5252;

            --misdemeanor: #ffab40;

            --infraction: #448aff;

        }



        body {

            font-family: 'Segoe UI', sans-serif;

            background-color: var(--dark-bg);

            color: var(--text-color);

            margin: 0;

            display: flex;

            flex-direction: column;

            align-items: center;

        }



        /* Navigace */

        nav {

            width: 100%;

            background-color: var(--police-blue);

            padding: 1rem 0;

            display: flex;

            justify-content: center;

            gap: 15px;

            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);

            position: sticky;

            top: 0;

            z-index: 100;

        }



        nav button {

            background: transparent;

            border: 1px solid rgba(255, 255, 255, 0.5);

            color: white;

            padding: 10px 25px;

            cursor: pointer;

            font-weight: bold;

            transition: 0.2s;

            border-radius: 4px;

        }



        nav button:hover {
            background: white;
            color: var(--police-blue);
        }



        .container {

            width: 95%;

            max-width: 1100px;

            margin: 20px;

            padding: 25px;

            background: var(--card-bg);

            border-radius: 12px;

            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);

        }



        .page {
            display: none;
            text-align: left;
        }

        .active {
            display: block;
        }



        /* Formulář */

        .grid-form {

            display: grid;

            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));

            gap: 15px;

            margin-bottom: 25px;

        }

        .full-width {
            grid-column: 1 / -1;
        }



        label {
            display: block;
            margin-bottom: 6px;
            color: var(--accent);
            font-weight: bold;
            font-size: 0.9rem;
        }

        input,
        select,
        textarea {

            width: 100%;

            padding: 12px;

            background: #2c2c2c;

            border: 1px solid #444;

            color: white;

            border-radius: 6px;

            box-sizing: border-box;

            outline: none;

        }

        input:focus {
            border-color: var(--accent);
        }



        /* SEZNAM ZÁKONŮ */

        .search-box {
            margin-bottom: 15px;
        }

        .search-box input {
            border: 2px solid var(--accent);
            font-size: 1rem;
        }



        .laws-selection {

            max-height: 450px;

            overflow-y: auto;

            border: 1px solid #333;

            background: #151515;

            border-radius: 8px;

        }



        .law-item {

            display: flex;

            align-items: center;

            padding: 12px 15px;

            border-bottom: 1px solid #222;

            gap: 15px;

            transition: background 0.2s;

            text-align: left;

        }

        .law-item:hover {
            background: #1f1f1f;
        }



        .law-item input[type="checkbox"] {

            width: 20px;

            height: 20px;

            margin: 0;

            flex-shrink: 0;

            cursor: pointer;

        }



        .tag {

            min-width: 100px;

            padding: 4px 0;

            border-radius: 4px;

            font-size: 0.7rem;

            font-weight: 900;

            text-align: center;

            text-transform: uppercase;

            flex-shrink: 0;

            display: inline-block;

        }

        .tag-tc {
            background: var(--crime);
            color: white;
        }

        .tag-pc {
            background: var(--misdemeanor);
            color: black;
        }

        .tag-pt {
            background: var(--infraction);
            color: white;
        }



        .law-text {

            flex-grow: 1;

            font-size: 0.95rem;

        }



        .law-text strong {
            color: #fff;
        }

        .law-text small {
            color: #888;
            margin-left: 10px;
        }



        .btn-generate {

            background: #2e7d32;

            color: white;

            border: none;

            padding: 18px;

            width: 100%;

            font-size: 1.2rem;

            margin-top: 25px;

            cursor: pointer;

            border-radius: 8px;

            font-weight: bold;

            letter-spacing: 1px;

        }

        .btn-generate:hover {
            background: #388e3c;
        }



        #output-area {

            margin-top: 25px;

            background: #0a0a0a;

            color: #e0e0e0;

            font-family: 'Consolas', 'Monaco', monospace;

            padding: 25px;

            white-space: pre-wrap;

            border: 1px solid #333;

            border-radius: 8px;

            cursor: pointer;

            line-height: 1.5;

        }



        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th,
        td {
            border: 1px solid #333;
            padding: 12px;
            text-align: left;
        }

        th {
            background: var(--police-blue);
            font-size: 0.9rem;
        }
    </style>

</head>

<body>



    <nav>

        <button onclick="showPage('page-home')">Úvod</button>

        <button onclick="showPage('page-cpz')">CPZ Generátor</button>

        <button onclick="showPage('page-laws')">Sazebník</button>

    </nav>



    <div id="page-home" class="container page active">

        <h1>Vítejte v MDT</h1>

        <p>Systém pro evidenci a generování reportů do CPZ.</p>

        <hr style="border: 0; border-top: 1px solid #333; margin: 20px 0;">

        <p>Pro začátek klikněte na <strong>CPZ Generátor</strong> v horním menu.</p>

    </div>



    <div id="page-cpz" class="container page">

        <h1>CPZ Report Generator</h1>



        <div class="grid-form">

            <div><label>Jméno</label><input type="text" id="sus-name" placeholder="John" autocomplete="off"></div>

            <div><label>Příjmení</label><input type="text" id="sus-surname" placeholder="Doe" autocomplete="off"></div>

            <div><label>Datum narození</label><input type="text" id="sus-dob" placeholder="01.01.1995"
                    autocomplete="off"></div>

            <div><label>Pohlaví</label><select id="sus-gender">
                    <option value="Muž">Muž</option>
                    <option value="Žena">Žena</option>
                </select></div>

            <div class="full-width"><label>Důvod zadržení</label><input type="text" id="sus-reason"
                    placeholder="Krádež vozidla." autocomplete="off"></div>

            <div><label>Policista</label><input type="text" id="officer" placeholder="<@disID>"></div>

            <div><label>Miranda</label><select id="miranda">
                    <option value="ANO">ANO</option>
                    <option value="NE">NE</option>
                </select></div>

            <div class="full-width"><label>Věci k navrácení</label><input type="text" id="items-return"
                    placeholder="ID, DL, telefon" autocomplete="off"></div>

            <div class="full-width"><label>Věci do evidence</label><input type="text" id="items-evidence"
                    placeholder="50g marihuany" autocomplete="off"></div>

        </div>



        <div class="search-box">

            <label>Hledat v zákonech:</label>

            <input type="text" id="law-search" placeholder="Hledat..." onkeyup="filterLaws()">

        </div>



        <div class="laws-selection" id="laws-list"></div>



        <button class="btn-generate" onclick="generateReport()">VYGENEROVAT A ZKOPIROVAT</button>



        <div id="output-area" onclick="copyToClipboard()" title="Klikněte pro kopírování">

            Vyplňte formulář a vyberte paragrafy...

        </div>

    </div>



    <div id="page-laws" class="container page">

        <h1>Kompletní sazebník</h1>

        <table id="laws-table">

            <thead>

                <tr>

                    <th>Kod</th>

                    <th>Typ</th>

                    <th>Znění (CZ/EN)</th>

                    <th>Pokuta</th>

                    <th>Vazba</th>

                </tr>

            </thead>

            <tbody id="laws-table-body"></tbody>

        </table>

    </div>



    <script>
        // Strukturovaná databáze rozdělená do kategorií
        const lawsDatabase = [
            {
                category: "I. Trestné činy proti spravedlnosti",
                laws: [
                    { id: 1, code: "PC31", type: "Wobbler", cz: "Spolupachatelství", en: "Aiding and Abetting", fine: 0, jail: "dle hlavního" },
                    { id: 2, code: "PC32", type: "Wobbler", cz: "Ukrytí pachatele", en: "Accessory After the Fact", fine: 15000, jail: 8 },
                    { id: 3, code: "PC67", type: "Felony", cz: "Nabízení úplatku", en: "Bribery", fine: 20000, jail: 10 },
                    { id: 4, code: "PC118", type: "Felony", cz: "Křivá výpověď", en: "Perjury", fine: 10000, jail: 6 },
                    { id: 5, code: "PC148.3", type: "Misdemeanor", cz: "Zneužití tísňové linky", en: "False Emergency", fine: 10000, jail: 0 }
                ]
            },
            {
                category: "II. Veřejný pořádek",
                laws: [
                    { id: 6, code: "PC148(a)(1)", type: "Misdemeanor", cz: "Bránění zatknutí", en: "Resisting Officer", fine: 4000, jail: 4 },
                    { id: 7, code: "PC415", type: "Misdemeanor", cz: "Rušení veřejného pořádku", en: "Disturbing the Peace", fine: 5000, jail: 0 },
                    { id: 8, code: "PC602", type: "Misdemeanor", cz: "Vstup na cizí pozemek", en: "Trespassing", fine: 6000, jail: 2 },
                    { id: 9, code: "PC646.9", type: "Wobbler", cz: "Stalking", en: "Stalking", fine: 15000, jail: 12 },
                    { id: 10, code: "PC186.22", type: "Felony", cz: "Gangová činnost", en: "Gang Participation", fine: 30000, jail: 16 },
                    { id: 11, code: "PC12022.2(a)", type: "Felony", cz: "Nošení vesty při násilném činu", en: "Wearing body armor", fine: 3000, jail: 4 },
                    { id: 12, code: "PC31360", type: "Felony", cz: "Nelegální držení balistické vesty", en: "Unlawful possession of body armor", fine: 5000, jail: 2 }
                ]
            },
            {
                category: "III. Majetková kriminalita",
                laws: [
                    { id: 13, code: "PC484", type: "Misdemeanor", cz: "Drobná krádež", en: "Petty Theft", fine: 4000, jail: 2 },
                    { id: 14, code: "PC487", type: "Wobbler", cz: "Velká krádež", en: "Grand Theft", fine: 15000, jail: 12 },
                    { id: 15, code: "PC518", type: "Felony", cz: "Vydírání", en: "Extortion", fine: 25000, jail: 14 },
                    { id: 16, code: "PC594", type: "Wobbler", cz: "Vandalizmus", en: "Vandalism", fine: 12000, jail: 5 },
                    { id: 17, code: "PC594.35", type: "Wobbler", cz: "Vykrádání hrobů", en: "Cemetery Vandalism", fine: 15000, jail: 2 }
                ]
            },
            {
                category: "IV. Vloupání, loupeže",
                laws: [
                    { id: 18, code: "PC213(a)(1)", type: "Felony", cz: "Loupež I. stupně", en: "Robbery 1st Degree", fine: 40000, jail: 14 },
                    { id: 19, code: "PC213(a)(2)", type: "Felony", cz: "Loupež II. stupně", en: "Robbery 2nd Degree", fine: 30000, jail: 12 },
                    { id: 20, code: "PC215", type: "Felony", cz: "Vykrádání vozidla", en: "Carjacking", fine: 13000, jail: 6 },
                    { id: 21, code: "PC459I", type: "Felony", cz: "Vloupání I. stupně", en: "Burglary 1st Degree", fine: 40000, jail: 12 },
                    { id: 22, code: "PC459II", type: "Wobbler", cz: "Vloupání II. stupně", en: "Burglary 2nd Degree", fine: 30000, jail: 9 }
                ]
            },
            {
                category: "V. Násilné trestné činy",
                laws: [
                    { id: 23, code: "PC187-1", type: "Felony", cz: "Vražda I. stupně", en: "Murder 1st Degree", fine: 0, jail: "Doživotí" },
                    { id: 24, code: "PC187-2", type: "Felony", cz: "Vražda II. stupně", en: "Murder 2nd Degree", fine: 0, jail: "Doživotí" },
                    { id: 25, code: "PC192V", type: "Felony", cz: "Zabití dobrovolné", en: "Voluntary Manslaughter", fine: 85000, jail: 40 },
                    { id: 26, code: "PC192I", type: "Felony", cz: "Zabití nedobrovolné", en: "Involuntary Manslaughter", fine: 35000, jail: 16 },
                    { id: 31, code: "PC664/187", type: "Felony", cz: "Pokus o vraždu", en: "Attempted Murder", fine: 55000, jail: 10 }
                ]
            },
            {
                category: "VI. Zbraně",
                laws: [
                    { id: 32, code: "PC29800", type: "Felony", cz: "Nelegální držení zbraně", en: "Prohibited Possession", fine: 25000, jail: 8 },
                    { id: 33, code: "PC30605", type: "Felony", cz: "Držení nelegální zbraně", en: "Assault Weapon", fine: 35000, jail: 13 },
                    { id: 35, code: "PC25850", type: "Misdemeanor", cz: "Nabitá zbraň", en: "Carrying Loaded Firearm", fine: 12000, jail: 2 }
                ]
            },
            {
                category: "IX. Dopravní",
                laws: [
                    { id: 51, code: "VC22349", type: "Infraction", cz: "Překročení max. rychlosti", en: "Speeding", fine: 2000, jail: 0 },
                    { id: 58, code: "VC2800.1", type: "Misdemeanor", cz: "Únik policii", en: "Evading Police", fine: 6000, jail: 2 },
                    { id: 59, code: "VC2800.2", type: "Felony", cz: "Nebezpečný únik", en: "Felony Evading", fine: 9000, jail: 3 }
                ]
            }
        ];

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
        }

        function getTagClass(type) {
            if (type === "Trestný čin" || type === "Felony") return "tag-tc";
            if (type === "Přečin" || type === "Misdemeanor" || type === "Wobbler") return "tag-pc";
            return "tag-pt";
        }

        // Funkce, která vykresluje kategorie do Generátoru i do Sazebníku
        function initLaws() {
            const listDiv = document.getElementById('laws-list');
            const tableBody = document.getElementById('laws-table-body');

            listDiv.innerHTML = "";
            tableBody.innerHTML = "";

            lawsDatabase.forEach(categoryGroup => {
                // Přidání hlavičky kategorie do seznamu (Generátor)
                const catHeader = document.createElement('div');
                catHeader.style.cssText = "background:#252525; padding:8px 15px; color:var(--accent); font-weight:bold; border-left:4px solid var(--accent); margin-top:15px;";
                catHeader.innerText = categoryGroup.category;
                listDiv.appendChild(catHeader);

                // Přidání hlavičky kategorie do tabulky (Sazebník)
                tableBody.innerHTML += `
                <tr style="background:#1a237e33">
                    <td colspan="5" style="color:var(--accent); font-weight:bold; font-size:1.1rem; padding:15px;">${categoryGroup.category}</td>
                </tr>`;

                categoryGroup.laws.forEach(law => {
                    const tagClass = getTagClass(law.type);

                    // Do Generátoru (vkládáme kategorii do data-cat pro pozdější vyhledání)
                    listDiv.innerHTML += `
                    <div class="law-item">
                        <input type="checkbox" class="law-checkbox" value="${law.id}" data-cat="${categoryGroup.category}">
                        <span class="tag ${tagClass}">${law.type}</span>
                        <div class="law-text"><strong>${law.code}</strong> - ${law.cz}</div>
                    </div>`;

                    // Do Sazebníku
                    tableBody.innerHTML += `
                    <tr>
                        <td><strong>${law.code}</strong></td>
                        <td><span class="tag ${tagClass}">${law.type}</span></td>
                        <td>${law.cz} / ${law.en}</td>
                        <td>${law.fine.toLocaleString()}$</td>
                        <td>${law.jail}</td>
                    </tr>`;
                });
            });
        }

        function filterLaws() {
            const input = document.getElementById('law-search').value.toLowerCase();
            document.querySelectorAll('.law-item').forEach(item => {
                item.style.display = item.innerText.toLowerCase().includes(input) ? "flex" : "none";
            });
        }

        function generateReport() {
            const name = document.getElementById('sus-name').value;
            const surname = document.getElementById('sus-surname').value;
            const dob = document.getElementById('sus-dob').value;
            const gender = document.getElementById('sus-gender').value;
            const reason = document.getElementById('sus-reason').value;
            const officer = document.getElementById('officer').value;
            const miranda = document.getElementById('miranda').value;
            const itemsRet = document.getElementById('items-return').value || "žádné";
            const itemsEvid = document.getElementById('items-evidence').value || "žádné";

            let totalFine = 0;
            let totalJail = 0;
            let chargesBlocks = "";

            document.querySelectorAll('.law-checkbox:checked').forEach(cb => {
                const lawId = cb.value;
                const catName = cb.getAttribute('data-cat');

                // Vyhledání zákona v nové struktuře
                const category = lawsDatabase.find(c => c.category === catName);
                const law = category.laws.find(l => l.id == lawId);

                totalFine += law.fine;

                // Ošetření pro "Doživotí" v součtu vazby
                if (typeof law.jail === 'number') {
                    totalJail += law.jail;
                } else if (law.jail.toLowerCase().includes("doživot")) {
                    totalJail = "DOŽIVOTÍ";
                }

                chargesBlocks += "```\n" + law.code + "\n" + law.cz + "\n" + law.en + "\n" + law.type + "\n" + law.jail + (typeof law.jail === 'number' ? " rok/let" : "") + "\n$" + law.fine.toLocaleString() + "\n```\n\n";
            });

            const template = `# CPZ REPORT

**Údaje o osobě:**

 •   Pohlaví: ${gender}
 •   Jméno a Příjmení: ${name} ${surname}
 •   Datum narození: ${dob}
⸻

**Údaje o zadržení:**

 •    Důvod: ${reason}
 •    Policista: ${officer}
 •    Lékařské vyšetření: nežádal
 •    Byla přečtena Miranda: ${miranda}
 •    Věci k navrácení: ${itemsRet}
 •    Věci do evidence: ${itemsEvid}

**Mugshot, Otisky prstů:**

 •    Mugshot hotov.
 •    Otisky prstů zhotoveny.
⸻

**Charges / dodatečné poznámky:**

${chargesBlocks}
**Celkem:**

\`\`\`
Pokuta: $${totalFine.toLocaleString()}
Vazba: ${totalJail} ${typeof totalJail === 'number' ? 'rok/let' : ''}
\`\`\``;

            document.getElementById('output-area').innerText = template;
            copyToClipboard();
        }

        function copyToClipboard() {
            const text = document.getElementById('output-area').innerText;
            if (text.length < 50) return;
            navigator.clipboard.writeText(text);
            const out = document.getElementById('output-area');
            out.style.borderColor = "#00ff41";
            setTimeout(() => { out.style.borderColor = "#333"; }, 1000);
        }

        window.onload = initLaws;
    </script>

</body>

</html>
